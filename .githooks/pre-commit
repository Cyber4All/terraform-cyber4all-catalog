# Git pre-commit hook

DIRS=$(python3 -c """
import os
def findDirs():
    dirs = []
    for root, _, files in os.walk('.'):
        for file in files:
            if '.tf' in file:
                dirs.append(root)
                break
    return ' '.join(tuple(dirs))
print(findDirs())
""")

for i in $DIRS
do
    terraform -chdir=$i fmt
done

for i in $DIRS
do
    tflint $i
done

for i in $DIRS
do
    terraform -chdir=$i validate
done
